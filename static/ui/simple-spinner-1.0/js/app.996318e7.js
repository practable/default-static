(function(t){function e(e){for(var s,n,o=e[0],c=e[1],d=e[2],u=0,h=[];u<o.length;u++)n=o[u],Object.prototype.hasOwnProperty.call(r,n)&&r[n]&&h.push(r[n][0]),r[n]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);l&&l(e);while(h.length)h.shift()();return i.push.apply(i,d||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],s=!0,o=1;o<a.length;o++){var c=a[o];0!==r[c]&&(s=!1)}s&&(i.splice(e--,1),t=n(n.s=a[0]))}return t}var s={},r={app:0},i=[];function n(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=s,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(a,s,function(e){return t[e]}.bind(null,s));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/ui/simple-spinner-1.0/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var d=0;d<o.length;d++)e(o[d]);var l=c;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";a("85ec")},"0dd6":function(t,e,a){},"168f":function(t,e,a){t.exports=a.p+"img/ruler.41f3337c.png"},"23e7e":function(t,e,a){},"441c":function(t,e,a){"use strict";a("9f80")},"47e2":function(t,e,a){},"482d":function(t,e,a){"use strict";a("47e2")},"56d7":function(t,e,a){"use strict";a.r(e),a.d(e,"eventBus",(function(){return te}));a("e260"),a("e6cf"),a("cca6"),a("a79d");var s,r,i=a("a026"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid-sm m-0",attrs:{id:"app"}},[a("navigation-bar",{attrs:{remoteLabVersion:t.remoteLabVersion}}),a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-12"},[a("streams"),t.isDataRecorderOn?a("data-recorder",{attrs:{disableTooltips:t.disableTooltips}}):t._e()],1)]),t.isWorkspaceOn?a("div",[a("workspace",{attrs:{mode:t.remoteLabVersion}})],1):t._e()],1)},o=[],c=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("canvas",{class:t.workspace_canvas_clickable?"clickable":"unclickable",attrs:{id:"workspace"},on:{mousedown:t.checkClick,mousemove:t.moveClicked,mouseup:t.mouseUnclick}}),s("img",{attrs:{id:"protractor",src:a("b4f2"),hidden:""}}),s("img",{attrs:{id:"ruler",src:a("168f"),hidden:""}})])},d=[],l=(a("cb29"),a("38cf"),new Image),u=new Image,h=[],m={name:"Workspace",props:{mode:String},data:function(){return{isSelected:!1,selected_index:null,selected_offset_x:0,selected_offset_y:0,rotateMode:!1,workspace_canvas_clickable:!0,ruler_width:800,ruler_height:80,ruler_video_width_ratio:1.428,ruler_ratio:.1,video_canvas:null}},created:function(){te.$on("addprotractor",this.addProtractor),te.$on("addruler",this.addRuler);var t=this.$store.getters.getCamera;this.ruler_video_width_ratio=0==t?1.29:.77,this.video_canvas=document.getElementById("video-canvas")},mounted:function(){var t=this;h=[],s=document.getElementById("workspace"),s.width=screen.width,s.height=screen.height,r=s.getContext("2d"),window.addEventListener("keydown",this.updateMode,!1),window.addEventListener("keyup",this.updateMode,!1),window.addEventListener("resize",(function(){setTimeout(t.resizeRuler,100)})),this.resizeRuler()},methods:{draw:function(){r.clearRect(0,0,screen.width,screen.height);for(var t=0;t<h.length;t++)r.save(),null!=h[t].image?(h[t].image==u&&(h[t].width=this.ruler_width,h[t].height=this.ruler_height),r.translate(h[t].x,h[t].y),r.translate(h[t].width/2,h[t].height/2),r.rotate(h[t].angle),r.drawImage(h[t].image,-h[t].width/2,-h[t].height/2,h[t].width,h[t].height)):(r.beginPath(),r.rect(h[t].x,h[t].y,h[t].width,h[t].height),r.stroke(),r.fill(),r.fillStyle="#444444"),r.restore()},addProtractor:function(){l.onload=function(){var t=100,e=100,a=400,s=200;h.push({x:t,y:e,width:a,height:s,image:l,angle:0}),r.drawImage(l,t,e,a,s)},l.src=document.getElementById("protractor").src},addRuler:function(){var t=this;u.onload=function(){var e=100,a=300,s=t.ruler_width,i=t.ruler_height;h.push({x:e,y:a,width:s,height:i,image:u,angle:0}),r.drawImage(u,e,a,s,i)},u.src=document.getElementById("ruler").src},updateMode:function(t){t.repeat||("o"==t.key?this.rotateMode=!this.rotateMode:"w"==t.key&&"keydown"==t.type&&(console.log(t),this.workspace_canvas_clickable=!this.workspace_canvas_clickable))},checkClick:function(t){for(var e=0;e<h.length;e++){var a=[0,0],s=[h[e].x+h[e].width/2,h[e].y+h[e].height/2],r=[t.offsetX-s[0],t.offsetY-s[1]],i=[],n=[h[e].x-s[0],h[e].y-s[1]],o=[h[e].x+h[e].width-s[0],h[e].y-s[1]],c=[h[e].x+h[e].width-s[0],h[e].y+h[e].height-s[1]],d=[h[e].x-s[0],h[e].y+h[e].height-s[1]];i.push(n),i.push(o),i.push(c),i.push(d);for(var l=h[e].angle,u=0;u<4;u++){var m=i[u][0],p=i[u][1];i[u][0]=m*Math.cos(l)-p*Math.sin(l),i[u][1]=m*Math.sin(l)+p*Math.cos(l)}this.doIntersect(a,r,i[0],i[1])||this.doIntersect(a,r,i[1],i[2])||this.doIntersect(a,r,i[2],i[3])||this.doIntersect(a,r,i[3],i[0])||(this.isSelected=!0,this.selected_index=e,this.selected_offset_x=t.offsetX-h[e].x,this.selected_offset_y=t.offsetY-h[e].y)}},checkOrientation:function(t,e,a){var s=(t[1]-e[1])*(a[0]-t[0])-(t[0]-e[0])*(a[1]-t[1]);return 0==s?0:s>0?1:2},doIntersect:function(t,e,a,s){var r=this.checkOrientation(t,e,a),i=this.checkOrientation(t,e,s),n=this.checkOrientation(a,s,t),o=this.checkOrientation(a,s,e);return r!=i&&n!=o},moveClicked:function(t){this.isSelected&&(this.rotateMode?t.movementY<0?h[this.selected_index].angle-=Math.PI/180:t.movementY>0&&(h[this.selected_index].angle+=Math.PI/180):(h[this.selected_index].x=t.offsetX-this.selected_offset_x,h[this.selected_index].y=t.offsetY-this.selected_offset_y),this.draw())},mouseUnclick:function(){this.isSelected=!1,this.selected_index=null},resizeRuler:function(){console.log("resizing"),this.ruler_width=this.video_canvas.clientWidth*this.ruler_video_width_ratio,this.ruler_height=this.ruler_ratio*this.ruler_width,this.draw()}}},p=m,v=(a("5700"),a("2877")),g=Object(v["a"])(p,c,d,!1,null,"7b45ddae",null),f=g.exports,_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"m-2 p-2 bg-white border rounded"},[a("div",{staticClass:"row justify-content-center align-items-center"},[t.isRecording?t._e():a("button",{staticClass:"btn btn-default btn-xs m-1",attrs:{id:"recordButton"},on:{click:t.record}},[t._v("Record")]),t.isRecording?a("button",{staticClass:"btn btn-default btn-xs m-1",attrs:{id:"stopButton"},on:{click:t.stopRecording}},[t._v("Stop")]):t._e(),a("button",{staticClass:"btn btn-default btn-xs m-1",attrs:{id:"clearButton"},on:{click:t.clearGraph}},[t._v("Reset")]),t.hasData?a("button",{staticClass:"btn btn-default btn-xs m-1",attrs:{id:"outputButton"},on:{click:t.outputToCSV}},[t._v("Download CSV")]):t._e()])])},b=[],w=(a("4160"),a("d3b7"),a("25f0"),a("159b"),a("a434"),{state:{current_enc_pos:0,current_angle:0,current_ang_vel:0,previous_ang_vels:[],values_in_average:100,average_count:0,current_time:0,start_time:0,currentMode:"",inputMode:"",graphDataParameter:"omega",data:[],unityDataObject:null,current_p_value:0,current_i_value:0,current_d_value:0,current_error:0,current_drive:0,current_command_value:0,step:{step_time:0,step_start:0,step_size:0},ramp:{ramp_start:0,ramp_gradient:1,ramp_start_time:0,max_voltage:12,max_rad_s:200},pid_parameters:{Kp:1,Ki:0,Kd:0,dt:3},isRecording:!1},addUnityData:function(t){this.state.unityDataObject=t},setGraphDataParameter:function(t){this.state.graphDataParameter=t},calculateAverageVelocity:function(){this.state.previous_ang_vels[this.state.average_count]=this.state.current_ang_vel,this.state.average_count>=this.state.values_in_average-1?this.state.average_count=0:this.state.average_count++;for(var t=0,e=0;e<this.state.values_in_average;e++)t+=this.state.previous_ang_vels[e];return t/this.state.values_in_average},clearAllData:function(){this.state.data=[],this.current_angle_unwrapped=0,this.current_ang_vel_unwrapped=0},getNumData:function(){return this.state.data.length},addData:function(t){this.state.data.push(t)},deleteData:function(t){this.state.data.splice(t,1)},getTime:function(){return(this.state.current_time-this.state.start_time)/1e3},getMaxTime:function(){var t=-1/0;return this.state.data.forEach((function(e){e.t>t&&(t=e.t)})),t},getMinTime:function(){var t=1/0;return this.state.data.forEach((function(e){e.t<t&&(t=e.t)})),t},hasStorage:function(){try{return window.localStorage.setItem("test","storage"),window.localStorage.removeItem("test"),!0}catch(t){return!1}},hasDataToLoad:function(t){return!!window.localStorage.getItem("savedData")&&window.localStorage.getItem("remoteLabVersion")==t},saveDataToLocalStorage:function(t){if(this.hasStorage()){if(this.getNumData()>0){var e=JSON.stringify(this.state.data);console.log(e),window.localStorage.setItem("savedData",e);var a=JSON.stringify(new Date);return window.localStorage.setItem("dateSaved",a),window.localStorage.setItem("remoteLabVersion",t),!0}return console.log("no data to save"),!1}return console.log("no localStorage allowed"),!1},loadDataFromLocalStorage:function(){if(this.hasStorage()){if(window.localStorage.getItem("savedData")){var t=window.localStorage.getItem("savedData");t=JSON.parse(t),this.clearAllData();for(var e=0;e<t.length;e++)this.addData(t[e]);return!0}return console.log("no saved data"),!1}return console.log("no saved data"),!1}}),S=w;window.dataStore=S;var k={name:"DataRecorder",props:{disableTooltips:Boolean},data:function(){return{data_store:w,isRecording:!1,time_interval:.05,time_interval_min:.01,interval_id:0,data_points_count:0,hasPlotted:!1,previous_angle:0,wrap_index:0,tooltip_delay:2e3,starting_angle:0}},components:{},created:function(){te.$on("maxdatapointsreached",this.stopRecording)},computed:{hasData:function(){return 0!==w.getNumData},hasError:function(){return!(!isNaN(this.time_interval)&&this.time_interval>=this.time_interval_min)},newTime:function(){return this.data_store.state.current_time},startRecord:function(){return this.data_store.state.isRecording}},watch:{newTime:function(){this.isRecording&&this.plot()},startRecord:function(){this.data_store.state.isRecording&&this.record()}},methods:{record:function(){this.hasError||(this.wrap_index=0,this.starting_angle=w.state.current_angle,this.previous_angle=this.starting_angle,w.state.start_time=w.state.current_time,this.data_points_count=0,this.isRecording=!0)},stopRecording:function(){this.isRecording=!1,w.state.isRecording=!1,this.wrap_index=0,te.$emit("updatetable")},plot:function(){this.data_points_count++;var t=parseFloat(w.state.current_angle),e=w.getTime(),a=parseFloat(w.state.current_ang_vel),s=180*t/Math.PI,r=2*Math.PI*a/60,i={id:w.getNumData(),t:parseFloat(e),theta:t,omega:a,theta_deg:s,omega_rad:r,command:w.state.current_command_value,drive:w.state.current_drive,error:w.state.current_error};w.addData(i),this.hasPlotted=!0},clearGraph:function(){w.clearAllData(),te.$emit("clearalldata"),this.hasPlotted=!1,this.wrap_index=0,w.state.current_angle<0?this.previous_angle=w.state.current_angle+2*Math.PI:this.previous_angle=w.state.current_angle},outputToCSV:function(){var t="",e="",a=new Date;e=a.getDate().toString()+(a.getMonth()+1).toString()+a.getFullYear().toString(),t="Time/s,Angle/rad,AngVel/rad/s,Command,Drive,Error\n";var s=w.state.data;s.forEach((function(e){t+=e.t.toString(),t+=",",t+=e.theta.toString(),t+=",",t+=e.omega_rad.toString(),null!=e.command?(t+=",",t+=e.command.toString()):(t+=",",t+=""),null!=e.drive?(t+=",",t+=e.drive.toString()):(t+=",",t+=""),null!=e.error?(t+=",",t+=e.error.toString()):(t+=",",t+=""),t+="\n"})),e+=".csv";var r=document.createElement("a");r.href="data:text/csv;charset=utf-8,"+encodeURI(t),r.target="_blank",r.download=e,r.click()},checkValueRange:function(t){return t>=this.time_interval_min?"OK":"Too small"}}},x=k,T=(a("86d3"),Object(v["a"])(x,_,b,!1,null,"f280e43e",null)),O=T.exports,D=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mb-5 pb-2"},[a("b-navbar",{attrs:{toggleable:"lg",type:"dark",variant:"primary",fixed:"top"}},[a("b-navbar-brand",{attrs:{href:"#"}},[t._v("Remote Lab: "+t._s(t.labName)+" ")]),a("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),a("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[a("b-navbar-nav",[a("b-nav-item-dropdown",{attrs:{text:"Tools",right:""}},[a("b-dropdown-item",{on:{click:function(e){return t.addTool("ruler")}}},[t._v("Ruler")]),a("b-dropdown-item",{on:{click:function(e){return t.addTool("protractor")}}},[t._v("Protractor")])],1),a("b-nav-item",{on:{click:t.clearWorkspace}},[t._v("Clear Tools")]),a("b-nav-item",{on:{click:t.toggleInstructions}},[t._v("Instructions")])],1),a("b-navbar-nav",{staticClass:"ml-auto"},[a("b-nav-text",[a("clock")],1)],1)],1)],1),a("div",{staticClass:"row"},[t.isInstructionsOn?a("div",{staticClass:"col-sm-12 mt-5"},[a("instructions")],1):t._e()])],1)},R=[],E=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"row"}},[a("div",{attrs:{id:"sessionTime"}},[t._v(" Session ends in: "+t._s(t.current_time_left))]),a("b-tooltip",{attrs:{triggers:"hover",delay:{show:0,hide:0},target:"sessionTime"}},[a("p",[t._v("Session ends at:")]),t._v(" "),a("p",[t._v(t._s(t.sessionEndTime))])])],1)},y=[],C={name:"Clock",data:function(){return{current_time:"",current_time_left:"",interval_id:0}},components:{},computed:{sessionEndTime:function(){var t=new Date(1e3*this.$store.getters.getExpiryTime);return this.getTime(t)}},watch:{},created:function(){},mounted:function(){var t=this;this.interval_id=setInterval((function(){t.updateClock()}),1e3)},methods:{addZeroes:function(t){return t<10?"0"+t:t},updateClock:function(){var t=new Date;this.current_time=this.getTime(t),this.current_time_left=this.getTimeLeft(t)},getTime:function(t){var e=t.getHours(),a=t.getMinutes(),s=t.getSeconds();return e=this.addZeroes(e),a=this.addZeroes(a),s=this.addZeroes(s),e+":"+a+":"+s},getTimeLeft:function(t){var e=1e3*this.$store.getters.getExpiryTime-t.getTime(),a=e/1e3,s=Math.floor(a/60);return a=Math.floor(a%60),s=this.addZeroes(s),a=this.addZeroes(a),e>0?s+" min : "+a+" secs":(te.$emit("stop"),te.$emit("sessionended",!0),clearInterval(this.interval_id),"ENDED")}}},M=C,L=(a("482d"),Object(v["a"])(M,E,y,!1,null,"782fb438",null)),V=L.exports,I=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},P=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"m-2 p-2 bg-white border rounded"},[a("div"),a("div",{staticClass:"text-left"},[a("p",[t._v("To control the DC Motor simply slide the 'Input voltage' slider to your chosen voltage value. To 'Stop' the motor click the red 'Stop' button.")]),a("p",[t._v(" The graph will automatically display the live angular velocity data coming from the optical encoder attached to the DC Motor. To record data for download or to take data snapshots, click the 'Record' button at the bottom of the page. The data streamed from the hardware will now be recorded and can be downloaded for analysis by clicking 'Download CSV'. Snapshots of this data can also be displayed on screen by clicking 'Record Snapshot'. There is a size limit to the data recorded, so it should be used to capture periods of time of around 20 seconds. ")]),a("p",[t._v("Hotkeys:")]),a("p",[t._v("Press 'w' to swap between workspace (ruler and protractor tool) and the UI.")]),a("p",[t._v("Rotate a tool by holding 'o' and clicking and dragging it.")]),a("p",[t._v("Click 'Clear Tools' in the navigation bar to remove the ruler and protractor.")])])])}],$={name:"Instructions",props:{},data:function(){return{}},components:{},mounted:function(){},computed:{},methods:{}},N=$,A=Object(v["a"])(N,I,P,!1,null,"12867391",null),U=A.exports,W={name:"NavigationBar",props:{remoteLabVersion:String},data:function(){return{taskOptionsAvailable:!0,isInstructionsOn:!1}},components:{Clock:V,Instructions:U},mounted:function(){},computed:{labName:function(){return"variable_governor"==this.remoteLabVersion?"Variable Governor":"spinning_disk"==this.remoteLabVersion?"Spinning Disk":"Robot Arm"}},methods:{addTool:function(t){this.toggleComponent("workspace"),setTimeout((function(){te.$emit("add"+t)}))},toggleComponent:function(t){te.$emit("toggle"+t)},clearWorkspace:function(){te.$emit("clearworkspace")},setExercise1v1:function(){te.$emit("setexercise1v1")},setExercise1v2:function(){te.$emit("setexercise1v2")},setExercise1v3:function(){te.$emit("setexercise1v3")},setExercise2v1:function(){te.$emit("setexercise2v1")},toggleInstructions:function(){this.isInstructionsOn=!this.isInstructionsOn}}},j=W,B=Object(v["a"])(j,D,R,!1,null,"aae7378a",null),F=B.exports,K=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-6"},[a("webcam-stream")],1),a("div",{staticClass:"col-sm-6"},[a("data-stream"),a("motor-snapshot")],1)])},J=[],G=(a("ac1f"),a("3ca3"),a("841c"),a("ddb0"),a("2b3d"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-sm m-2 bg-white border rounded"},[a("div",{staticClass:"row",attrs:{id:"video"}},[a("div",{staticClass:"col-12"},[a("video-element",{attrs:{url:t.url}})],1)])])}),z=[],Y=a("bc3a"),Z=a.n(Y),X=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.hasSessionEnded?a("div",{staticClass:"row"},[t._m(0)]):a("div",[t._m(1)])},H=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-12"},[a("img",{attrs:{id:"session-end-image",src:"https://assets.practable.io/images/common/thank-you-screen.svg",alt:"session ended"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("canvas",{attrs:{id:"video-canvas"}})])])}],q=a("7a33"),Q=a.n(q),tt={name:"VideoElement",props:["url"],data:function(){return{player:null,hasSessionEnded:!1}},computed:{getUrl:function(){return this.$store.getters.getVideoURL}},watch:{getUrl:function(){var t=document.getElementById("video-canvas");this.player=new Q.a.Player(this.url,{canvas:t})}},created:function(){var t=this;te.$on("sessionended",(function(e){t.hasSessionEnded=e}))},mounted:function(){}},et=tt,at=(a("7867"),Object(v["a"])(et,X,H,!1,null,null,null)),st=at.exports,rt={name:"WebcamStream",components:{VideoElement:st},data:function(){return{stream:Object}},computed:{urlOK:function(){return this.$store.getters.getVideoURLObtained},streamOK:function(){return this.$store.getters.getStream("video")},url:function(){return this.$store.getters.getVideoURL}},mounted:function(){var t=this,e=function(){t.accessVideo()};document.addEventListener("streams:dropped",e)},methods:{accessVideo:function(){this.stream=this.$store.getters.getStream("video");var t=this.stream.url,e=this.stream.token,a=this.$store;a.dispatch("deleteVideoURL"),Z.a.post(t,{},{headers:{Authorization:e}}).then((function(t){a.dispatch("setVideoURL",t.data.uri)})).catch((function(t){return console.log(t)}))}},watch:{streamOK:function(t){t?this.accessVideo():console.log("no stream")},urlOK:function(t){t&&console.log("get videoURL",this.urlOK,this.url)}}},it=rt,nt=(a("441c"),Object(v["a"])(it,G,z,!1,null,"53553830",null)),ot=nt.exports,ct=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",["spinning_disk"==t.version?a("div",[a("control-panel-spinning-disk",{attrs:{remoteLabVersion:t.version,isDataRecorderOn:t.dataRecorder,disableTooltips:t.tooltips,url:t.url}})],1):"robot_arm"==t.version?a("div",[a("control-panel-robot-arm",{attrs:{remoteLabVersion:t.version,isDataRecorderOn:t.dataRecorder,disableTooltips:t.tooltips,url:t.url}})],1):"variable_governor"==t.version?a("div",[a("control-panel-variable-governor",{attrs:{remoteLabVersion:t.version,isDataRecorderOn:t.dataRecorder,disableTooltips:t.tooltips,url:t.url}})],1):t._e()])},dt=[],lt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-sm m-2 bg-white border rounded"},[a("div",{staticClass:"row align-content-center m-1"},[a("div",{staticClass:"col-12"},[a("canvas",{directives:[{name:"show",rawName:"v-show",value:"positionPid"!=t.currentMode,expression:'currentMode != "positionPid"'}],attrs:{id:"smoothie-chart_omega"}})])]),a("div",{staticClass:"panel panel-default"},[a("div",{staticClass:"panel-heading"},[a("h3",[t._v("Current mode: "+t._s(t.getModeName))])]),a("div",{staticClass:"panel-body"},[t._v(t._s(this.message))]),a("div",{class:t.getErrorClass},[a("h3",[t._v(t._s(this.error))])])]),a("div",{attrs:{id:"buttons"}},[a("div",{staticClass:"row align-content-center m-1 btn-group"},[a("div",{staticClass:"col-sm"},[a("button",{staticClass:"btn btn-default btn-lg",attrs:{id:"stop"},on:{click:t.stop}},[t._v("Stop")])])])]),a("div",["free"==t.inputMode?a("div",[a("DCMotorPanel",{attrs:{dataSocket:t.getDataSocket,mode:t.currentMode,maxV:12}})],1):t._e()])])},ut=[],ht=(a("96cf"),a("1da1")),mt=a("2589"),pt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"m-2 p-2 bg-white border rounded"},[a("div",{staticClass:"form-group row justify-content-center align-items-center pb-2"},[a("label",{staticClass:"col-sm-2 col-form-label",attrs:{for:"voltage"}},[t._v("Input voltage ("+t._s(t.voltage)+"V)")]),a("div",{staticClass:"col-4"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.voltage,expression:"voltage"}],staticClass:"slider",attrs:{type:"range",min:-t.maxV,max:t.maxV,step:"0.1",list:"tickmarks",id:"voltage"},domProps:{value:t.voltage},on:{focus:t.setSpeedRaw,change:t.setVoltage,__r:function(e){t.voltage=e.target.value}}})]),a("label",{staticClass:"col-sm-2 col-form-label",attrs:{for:"ang_vel"}},[t._v("Motor angular velocity (rad/s)")]),t.isAnalogueOutput?a("div",{staticClass:"col-sm-4"},[a("analogue-output",{attrs:{outputValue:t.angVel,minValue:0,maxValue:300,intervalValue:20,minorIntervalValue:10}})],1):a("div",{staticClass:"col-sm-4"},[a("input",{staticClass:"form-control",attrs:{type:"text",id:"ang_velocity"},domProps:{value:t.avgAngVel}})])])])},vt=[],gt=(a("a9e3"),a("b680"),function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)}),ft=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-sm m-0 p-0 bg-white"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("canvas",{attrs:{id:"output"}})])])])}],_t={name:"AnalogueOutput",props:{outputValue:String,minValue:Number,maxValue:Number,intervalValue:Number,minorIntervalValue:Number},data:function(){return{canvas:null,ctx:null,arm:0}},created:function(){},beforeMount:function(){},mounted:function(){this.canvas=document.getElementById("output"),this.ctx=this.canvas.getContext("2d"),this.drawDial(),this.drawTicks(),this.drawMinorTicks(),this.drawArm()},components:{},computed:{armValue:function(){var t=this.outputValue;return isNaN(Number(t))?0:Number(t)}},watch:{armValue:function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),isNaN(Number(this.outputValue))?this.arm=0:this.arm=Math.abs(Number(this.outputValue)),this.drawDial(),this.drawTicks(),this.drawMinorTicks(),this.drawArm()}},methods:{drawArm:function(){var t=Math.PI/2+2*Math.PI*this.arm/this.maxValue;this.ctx.lineWidth=4,this.ctx.beginPath(),this.ctx.moveTo(this.canvas.width/2,this.canvas.height/2),this.ctx.lineTo(this.canvas.width/2+Math.cos(t)*this.canvas.height/2,this.canvas.height/2+Math.sin(t)*this.canvas.height/2),this.ctx.strokeStyle="#586A73",this.ctx.stroke()},drawDial:function(){this.ctx.beginPath(),this.ctx.arc(this.canvas.width/2,this.canvas.height/2,this.canvas.height/2-5,0,2*Math.PI),this.ctx.lineWidth=3,this.ctx.fillStyle="rgba(50, 50, 50, 0.1)",this.ctx.strokeStyle="#92949C",this.ctx.stroke(),this.ctx.fill(),this.ctx.beginPath(),this.ctx.arc(this.canvas.width/2,this.canvas.height/2,this.canvas.height/2,0,2*Math.PI),this.ctx.lineWidth=3,this.ctx.strokeStyle="#92949C",this.ctx.stroke(),this.ctx.beginPath(),this.ctx.arc(this.canvas.width/2,this.canvas.height/2,5,0,2*Math.PI),this.ctx.lineWidth=3,this.ctx.fillStyle="#353535",this.ctx.strokeStyle="#0C3D4A",this.ctx.stroke(),this.ctx.fill()},drawTicks:function(){for(var t=(this.maxValue-this.minValue)/this.intervalValue,e=Math.PI/2,a=0;a<t;a++){e=2*a*Math.PI/t+Math.PI/2,this.ctx.lineWidth=2,this.ctx.beginPath();var s=this.canvas.width/2+Math.cos(e)*(this.canvas.height/2),r=this.canvas.height/2+Math.sin(e)*(this.canvas.height/2),i=this.canvas.width/2+Math.cos(e)*(this.canvas.height/2-this.canvas.height/2/4),n=this.canvas.height/2+Math.sin(e)*(this.canvas.height/2-this.canvas.height/2/4);this.ctx.moveTo(s,r),this.ctx.lineTo(i,n),this.ctx.strokeStyle="#466B76",this.ctx.stroke(),this.drawTickValue((this.minValue+a*this.intervalValue).toString(),i,n)}},drawTickValue:function(t,e,a){this.ctx.font="10px Arial",this.ctx.textAlign="center",this.ctx.fillText(t,e,a)},drawMinorTicks:function(){for(var t=(this.maxValue-this.minValue)/this.minorIntervalValue,e=Math.PI/2,a=0;a<t;a++){e=2*a*Math.PI/t+Math.PI/2,this.ctx.lineWidth=1,this.ctx.beginPath();var s=this.canvas.width/2+Math.cos(e)*(this.canvas.height/2),r=this.canvas.height/2+Math.sin(e)*(this.canvas.height/2),i=this.canvas.width/2+Math.cos(e)*(this.canvas.height/2-this.canvas.height/2/7),n=this.canvas.height/2+Math.sin(e)*(this.canvas.height/2-this.canvas.height/2/7);this.ctx.moveTo(s,r),this.ctx.lineTo(i,n),this.ctx.strokeStyle="#466B76",this.ctx.stroke()}}}},bt=_t,wt=(a("9889"),Object(v["a"])(bt,gt,ft,!1,null,"699ee62e",null)),St=wt.exports,kt={name:"DCMotorPanel",props:{dataSocket:WebSocket,maxV:Number,mode:String},data:function(){return{data_store:w,voltage:0,motor_max_voltage:12,isAnalogueOutput:!0}},components:{AnalogueOutput:St},computed:{angVel:function(){var t=this.data_store.state.current_ang_vel;return t=2*t*Math.PI/60,t},avgAngVel:function(){var t=this.data_store.calculateAverageVelocity();return t.toFixed(2)}},watch:{mode:function(){"stopped"==this.mode&&(this.voltage=0)}},methods:{setSpeedRaw:function(){te.$emit("setdcmotormode")},onStop:function(){this.voltage=0},setVoltage:function(){var t=this.voltage;this.dataSocket.send(JSON.stringify({set:"volts",to:t}))}}},xt=kt,Tt=Object(v["a"])(xt,pt,vt,!1,null,"4f27d050",null),Ot=Tt.exports,Dt={name:"ControlPanel",props:{isDataRecorderOn:Boolean,disableTooltips:Boolean,remoteLabVersion:String,url:String},components:{DCMotorPanel:Ot},data:function(){return{dataSocket:null,speedParam:0,angleParam:0,kpParam:1,kiParam:0,kdParam:0,dtParam:20,isStopped:!0,changingMode:!1,currentMode:"stopped",inputMode:"free",message:"",error:"",canvas_omega:null,canvas_theta:null,ang_vel_max:1e3,ang_vel_min:-1e3,angle_max:3.14,angle_min:-3.14,timerParam:30,tooltip_delay:2e3,showInputType:!0,max_parameter_values:{kp:10,ki:10,kd:5,dt:20},min_parameter_values:{kp:0,ki:0,kd:0,dt:.01}}},created:function(){var t=this;te.$on("stop",this.stop),te.$on("setfreeinput",this.setFreeMode),te.$on("setstepinput",this.setStepMode),te.$on("setrampinput",this.setRampMode),te.$on("setdcmotormode",this.speedRaw),te.$on("setpidspeedmode",this.speedPid),te.$on("setpidpositionmode",this.positionPid),te.$on("hardwarestop",this.hasStopped),te.$on("showinputtype",(function(e){t.showInputType=e})),te.$on("maxdatapointsreached",(function(){t.error="Max data points reached, graphing automatically stopped"}))},mounted:function(){},computed:{getDataSocket:function(){return this.dataSocket},getUrl:function(){return this.$store.getters.getDataURL},version:function(){return this.$store.getters.getRemoteLabVersion},dataRecorder:function(){return this.$store.getters.getIsDataRecorderOn},tooltips:function(){return this.$store.getters.getDisableTooltips},getModeName:function(){return"positionPid"==this.currentMode?"position (PID)":"speedPid"==this.currentMode?"velocity (PID)":"speedRaw"==this.currentMode?"voltage (open loop)":this.currentMode},getErrorClass:function(){return""==this.error?"":"error-message border border-danger"}},watch:{getUrl:function(){var t=this;return Object(ht["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.connect();case 2:console.log("connection complete"),w.setGraphDataParameter("omega");case 4:case"end":return e.stop()}}),e)})))()}},methods:{stop:function(){this.clearMessages(),"ramp"==this.inputMode&&te.$emit("stopramp"),this.showInputType=!0,this.speedParam=0,this.currentMode="stopped",this.dataSocket.send(JSON.stringify({set:"mode",to:"stop"})),this.changingMode=!1,this.updateStore()},hasStopped:function(t){"stopped"!=this.currentMode&&(this.clearMessages(),this.showInputType=!0,this.error="Automatic stop: "+t,this.speedParam=0,this.currentMode="stopped",this.changingMode=!1,this.updateStore())},speedRaw:function(){this.clearMessages(),"stopped"==this.currentMode?(w.setGraphDataParameter("omega"),this.currentMode="speedRaw",this.dataSocket.send(JSON.stringify({set:"mode",to:"motor"}))):this.error="Must STOP before entering speedRaw mode",this.changingMode=!1,this.updateStore()},setSpeed:function(){if(this.clearMessages(),this.showInputType=!1,isNaN(this.speedParam))this.error="Speed parameter is NaN";else if("speedPid"==this.currentMode){var t=parseFloat(this.speedParam);this.dataSocket.send(JSON.stringify({set:"velocity",to:t}))}else this.error},setTimer:function(){this.clearMessages(),this.dataSocket.send(JSON.stringify({set:"timer",to:this.timerParam}))},hotkey:function(t){"s"==t.key&&this.stop()},clearMessages:function(){this.message="",this.error=""},updateStore:function(){w.state.pid_parameters.Kp=this.kpParam,w.state.pid_parameters.Ki=this.kiParam,w.state.pid_parameters.Kd=this.kdParam,w.state.pid_parameters.dt=this.dtParam,w.state.currentMode=this.currentMode,w.state.inputMode=this.inputMode,console.log("store updated")},setFreeMode:function(){this.inputMode="free"},setStepMode:function(){this.inputMode="step"},setRampMode:function(){this.inputMode="ramp"},resetParameters:function(){this.kpParam=1,this.kiParam=0,this.kdParam=0,this.dtParam=20,this.setParameters()},toggleInputType:function(t){console.log("event emitted"),this.showInputType=t},connect:function(){var t=this;return Object(ht["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var a=t.url;console.log("data URL is ="+a),t.dataSocket=new WebSocket(t.url);var s,r,i,n=0,o=0,c=[],d=0,l=!1,u=1200,h=60,m=!0,p=new mt["SmoothieChart"]({responsive:m,millisPerPixel:10,grid:{fillStyle:"#ffffff"},maxValue:300,minValue:-300,interpolation:"linear",labels:{fillStyle:"#0024ff",precision:2}});t.canvas_omega=document.getElementById("smoothie-chart_omega");var v=new mt["TimeSeries"];p.addTimeSeries(v,{lineWidth:2,strokeStyle:"#0024ff"}),p.streamTo(t.canvas_omega,0),t.dataSocket.onopen=function(t){console.log("dataSocket open"+t),e(console.log("opened"))},t.dataSocket.onmessage=function(e){try{var a=JSON.parse(e.data);if(w.state.current_p_value=a.p_sig,w.state.current_i_value=a.i_sig,w.state.current_d_value=a.d_sig,w.state.current_error=a.e,w.state.current_drive=a.y,w.state.current_command_value=a.c,a.error)t.hasStopped(a.error);else{var m=a.t;m=parseFloat(m);var p=(new Date).getTime()-m,g=a.d,f=a.v,_=60*f/(2*Math.PI);0==d?(n=p,c[0]=p):c[d%10]=p,o=0;for(var b=0;b<c.length;b++)o+=c[b];o/=c.length,s=1/h,r=1-s,p=d<u?(n*d+p)/(d+1):n*r+p*s,d+=1,i=m+p,isNaN(i)?l&&console.log("NaN so not logging to smoothie",n,m,f):(isNaN(g)||(w.state.current_time=m,w.state.current_angle=g),isNaN(f)||(w.state.current_time=m,w.state.current_ang_vel=_,v.append(m+o,f)),l&&console.log(n,m,f))}}catch(S){l&&console.log(S)}},w.state.start_time=(new Date).getTime(),window.addEventListener("keydown",t.hotkey,!1),window.addEventListener("pagehide",t.stop),window.addEventListener("beforeunload",t.stop)})));case 1:case"end":return e.stop()}}),e)})))()},setMaxParameters:function(t){("positionPid"==t||"speedPid"==t)&&(this.max_parameter_values.kp=10,this.max_parameter_values.ki=10,this.max_parameter_values.kd=5,this.max_parameter_values.dt=20)},checkInputValid:function(t,e){return!isNaN(e)&&e>=0?"kp"==t?e>this.max_parameter_values.kp||e<this.min_parameter_values.kp?"form-control error":"form-control":"ki"==t?e>this.max_parameter_values.ki||e<this.min_parameter_values.ki?"form-control error":"form-control":"kd"==t?e>this.max_parameter_values.kd||e<this.min_parameter_values.kd?"form-control error":"form-control":"dt"==t?e>this.max_parameter_values.dt||e<this.min_parameter_values.dt?"form-control error":"form-control":void 0:" form-control error"},getTooltipTitle:function(t,e){return isNaN(e)?"Invalid input":"kp"==t?e>this.max_parameter_values.kp||e<this.min_parameter_values.kp?"Outside appropriate range":"Value looks good!":"ki"==t?e>this.max_parameter_values.ki||e<this.min_parameter_values.ki?"Outside appropriate range":"Value looks good!":"kd"==t?e>this.max_parameter_values.kd||e<this.min_parameter_values.kd?"Outside appropriate range":"Value looks good!":"dt"==t?e>this.max_parameter_values.dt||e<this.min_parameter_values.dt?"Outside appropriate range":"Value looks good!":void 0}}},Rt=Dt,Et=(a("d479"),Object(v["a"])(Rt,lt,ut,!1,null,"3642724a",null)),yt=Et.exports,Ct={name:"DataStream",components:{ControlPanelSpinningDisk:yt},data:function(){return{stream:Object}},computed:{urlOK:function(){return this.$store.getters.getDataURLObtained},streamOK:function(){return this.$store.getters.getStream("data")},url:function(){return this.$store.getters.getDataURL},version:function(){return this.$store.getters.getRemoteLabVersion},dataRecorder:function(){return this.$store.getters.getIsDataRecorderOn},tooltips:function(){return this.$store.getters.getDisableTooltips}},mounted:function(){var t=this,e=function(){t.getWebsocketConnection()};document.addEventListener("streams:dropped",e)},methods:{getWebsocketConnection:function(){this.stream=this.$store.getters.getStream("data");var t=this.stream.url,e=this.stream.token,a=this.$store;a.dispatch("deleteDataURL"),Z.a.post(t,{},{headers:{Authorization:e}}).then((function(t){a.dispatch("setDataURL",t.data.uri)})).catch((function(t){return console.log(t)}))}},watch:{streamOK:function(t){t?this.getWebsocketConnection():console.log("no stream")},urlOK:function(t){t&&console.log("get dataURL",this.urlOK,this.url)}}},Mt=Ct,Lt=Object(v["a"])(Mt,ct,dt,!1,null,"03391b96",null),Vt=Lt.exports,It=a("5a0c"),Pt=a.n(It),$t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"m-2 bg-white border rounded"},[a("div",{staticClass:"row justify-content-center align-items-center"},[a("div",{staticClass:"form-group col-1"},[a("label",{attrs:{for:"time"}},[t._v("t/s")]),a("div",{staticClass:"current border border-right-0"},[a("p",[t._v(t._s(t.time.toFixed(2)))])]),t._l(t.snaps,(function(e){return a("p",{key:e.time,attrs:{id:e.time}},[t._v(" "+t._s(e.time)+" ")])}))],2),a("div",{staticClass:"form-group col-2 v-divider"},[a("label",{attrs:{for:"position"}},[t._v("Angle/rad")]),a("div",{staticClass:"current border border-right-0 border-left-0"},[a("p",[t._v(t._s(t.position.toFixed(2)))])]),t._l(t.snaps,(function(e){return a("p",{key:e.position,attrs:{id:e.position}},[t._v(" "+t._s(e.position)+" ")])}))],2),a("div",{staticClass:"form-group col-2 v-divider"},[a("label",{attrs:{for:"velocity"}},[t._v("Ang. Vel/(rad/s)")]),a("div",{staticClass:"current border border-right-0 border-left-0"},[a("p",[t._v(t._s(t.velocity.toFixed(2)))])]),t._l(t.snaps,(function(e){return a("p",{key:e.velocity,attrs:{id:e.velocity}},[t._v(" "+t._s(e.velocity)+" ")])}))],2),a("div",{staticClass:"form-group col-2 v-divider"},[a("label",{attrs:{for:"command"}},[t._v("Command")]),a("div",{staticClass:"current border border-right-0 border-left-0"},[a("p",[t._v(t._s(t.command.toFixed(2)))])]),t._l(t.snaps,(function(e){return a("p",{key:e.command,attrs:{id:e.command}},[t._v(" "+t._s(e.command)+" ")])}))],2),a("div",{staticClass:"form-group col-2 v-divider"},[a("label",{attrs:{for:"drive"}},[t._v("Drive")]),a("div",{staticClass:"current border border-right-0 border-left-0"},[a("p",[t._v(t._s(t.drive.toFixed(2)))])]),t._l(t.snaps,(function(e){return a("p",{key:e.drive,attrs:{id:e.drive}},[t._v(" "+t._s(e.drive)+" ")])}))],2),a("div",{staticClass:"form-group col-2 v-divider"},[a("label",{attrs:{for:"error"}},[t._v("Error")]),a("div",{staticClass:"current border border-left-0"},[a("p",[t._v(t._s(t.error.toFixed(2)))])]),t._l(t.snaps,(function(e){return a("p",{key:e.error,attrs:{id:e.error}},[t._v(" "+t._s(e.error)+" ")])}))],2)]),a("div",{staticClass:"row justify-content-center align-items-center"},[a("button",{staticClass:"btn btn-default btn-sm m-3",attrs:{id:"snapshot"},on:{click:t.takeSnapshot}},[t._v("Record Snapshot")]),a("button",{staticClass:"btn btn-default btn-sm m-3",attrs:{id:"reset_snaps"},on:{click:t.resetSnaps}},[t._v("Reset")])])])},Nt=[],At={name:"MotorSnapshot",props:{},data:function(){return{dataStore:w,time:0,position:0,velocity:0,command:0,drive:0,error:0,snapshot_time:0,snapshot_position:0,snapshot_velocity:0,snapshot_command:0,snapshot_drive:0,snapshot_error:0,snaps:[]}},computed:{newData:function(){return this.dataStore.state.data}},watch:{newData:function(){this.time=w.getTime(),this.position=w.state.current_angle,this.velocity=2*w.state.current_ang_vel*Math.PI/60,null!=w.state.current_error?this.error=w.state.current_error:this.error=0,null!=w.state.current_drive?this.drive=w.state.current_drive:this.drive=0,null!=w.state.current_command_value?this.command=w.state.current_command_value:this.command=0}},methods:{takeSnapshot:function(){this.snapshot_time=this.time,this.snapshot_position=this.position,this.snapshot_velocity=this.velocity,null!=this.command?this.snapshot_command=this.command:this.snapshot_command=0,null!=this.drive?this.snapshot_drive=this.drive:this.snapshot_drive=0,null!=this.error?this.snapshot_error=this.error:this.snapshot_error=0;var t={time:this.snapshot_time.toFixed(2),position:this.snapshot_position.toFixed(2),velocity:this.snapshot_velocity.toFixed(2),command:this.snapshot_command.toFixed(2),drive:this.snapshot_drive.toFixed(2),error:this.snapshot_error.toFixed(2)};this.snaps.push(t)},resetSnaps:function(){this.snaps=[]}},mounted:function(){},created:function(){}},Ut=At,Wt=(a("5ca1"),Object(v["a"])(Ut,$t,Nt,!1,null,"6b422380",null)),jt=Wt.exports,Bt={name:"Streams",components:{WebcamStream:ot,DataStream:Vt,MotorSnapshot:jt},data:function(){return{}},computed:{decodedStreams:function(){return this.$store.getters.getStreams},streamsObtained:function(){return this.$store.getters.getStreamsObtained},videoStream:function(){return this.$store.getters.getStream("video")},dataStream:function(){return this.$store.getters.getStream("data")}},created:function(){te.$on("sessionended",this.sessionExpired)},mounted:function(){if(!this.streamsObtained){try{var t=new URLSearchParams(window.location.search),e=t.get("streams"),a=JSON.parse(decodeURIComponent(String(e)));this.$store.dispatch("setStreams",a);var s=t.get("exp");this.$store.dispatch("setExpiryTime",s);var r=t.get("v");this.$store.dispatch("setCamera",r)}catch(d){console.log("error decoding streams"),this.$store.dispatch("deleteStreams")}var i=this,n=function(){i.$store.dispatch("setLastVideoWrite",Pt()().valueOf())};document.addEventListener("jsmpeg:write",(function(){n()}));var o=function(){var t=i.$store.getters.getLastVideoCheck,e=i.$store.getters.getLastVideoWrite,a=function(){i.$store.dispatch("setConnectionIsDropped",!0),i.$store.dispatch("setConnectionDroppedAt",Pt()().unix());var t=new Event("streams:dropped");document.dispatchEvent(t)};if(t>e){if(i.$store.getters.getConnectionIsDropped){var s=i.$store.getters.getConnectionDroppedAt,r=Pt()().unix()-s;return void(r>10&&a())}a()}else i.$store.dispatch("setLastVideoCheck",Pt()().valueOf()),i.$store.dispatch("setConnectionIsDropped",!1)},c=setInterval(o,1e3);document.addEventListener("streams:expired",(function(){clearInterval(c)}))}},methods:{sessionExpired:function(){var t=new Event("streams:expired");document.dispatchEvent(t)}},watch:{}},Ft=Bt,Kt=Object(v["a"])(Ft,K,J,!1,null,null,null),Jt=Kt.exports,Gt={name:"App",components:{Workspace:f,DataRecorder:O,NavigationBar:F,Streams:Jt},data:function(){return{remoteLabVersion:"spinning_disk",isTableOn:!1,isGraphOn:!1,isStopwatchOn:!1,isWorkspaceOn:!1,isAutoCommandOn:!1,isDataRecorderOn:!1,isInputGraphOn:!1,isSystemDiagramsOn:!1,isSimulationOn:!1,disableTooltips:!1,showLoadDataModal:!1,saved_date:""}},created:function(){te.$on("clearworkspace",this.clearWorkspace),te.$on("toggleworkspace",this.addWorkspace),this.$store.dispatch("setRemoteLabVersion",this.remoteLabVersion),this.$store.dispatch("setDataRecorder",this.isDataRecorderOn),this.$store.dispatch("setDisableTooltips",this.disableTooltips)},mounted:function(){var t=this;w.hasDataToLoad(this.remoteLabVersion)?(this.saved_date=JSON.parse(window.localStorage.getItem("dateSaved")),this.showLoadDataModal=!0):this.showLoadDataModal=!1,this.toggleDataRecorder(),window.addEventListener("pagehide",(function(){w.saveDataToLocalStorage(t.remoteLabVersion)})),window.addEventListener("beforeunload",(function(){w.saveDataToLocalStorage(t.remoteLabVersion)}))},methods:{addWorkspace:function(){this.isWorkspaceOn=!0},toggleGraph:function(){this.isGraphOn=!this.isGraphOn,this.isGraphOn&&(this.isDataRecorderOn||this.toggleDataRecorder())},clearWorkspace:function(){this.isWorkspaceOn=!1},toggleDataRecorder:function(){console.log("data recorder toggled"),this.isDataRecorderOn=!this.isDataRecorderOn,this.isDataRecorderOn?this.$store.dispatch("setDataRecorder",!0):this.$store.dispatch("setDataRecorder",!1)},toggleStopwatch:function(){this.isStopwatchOn=!this.isStopwatchOn},toggleTable:function(){this.isTableOn=!this.isTableOn,this.isTableOn&&(this.isDataRecorderOn||this.toggleDataRecorder())},loadData:function(){w.loadDataFromLocalStorage(),this.showLoadDataModal=!1}}},zt=Gt,Yt=(a("034f"),Object(v["a"])(zt,n,o,!1,null,null,null)),Zt=Yt.exports,Xt=(a("4de4"),a("2f62"));i["default"].use(Xt["a"]);var Ht=new Xt["a"].Store({state:{connectionDroppedAt:0,connectionIsDropped:!1,lastVideoCheck:0,lastVideoWrite:0,streams:[],streamsObtained:!1,videoURL:"",videoURLObtained:!1,dataURL:"",dataURLObtained:!1,remoteLabVersion:"",isDataRecorderOn:!1,disableTooltips:!1,expiryTime:"",camera:""},mutations:{SET_CONNECTION_DROPPED_AT:function(t,e){t.connectionDroppedAt=e},SET_CONNECTION_IS_DROPPED:function(t,e){t.connectionIsDropped=e},SET_LAST_VIDEO_CHECK:function(t,e){t.lastVideoCheck=e},SET_LAST_VIDEO_WRITE:function(t,e){t.lastVideoWrite=e},DELETE_STREAMS:function(t){t.streams={},t.streamsObtained=!1},SET_STREAMS:function(t,e){t.streams=e,t.streamsObtained=!0},SET_VIDEO_URL:function(t,e){t.videoURL=e,t.videoURLObtained=!0},DELETE_VIDEO_URL:function(t){t.videoURL="",t.videoURLObtained=!1},SET_DATA_URL:function(t,e){t.dataURL=e,t.dataURLObtained=!0},DELETE_DATA_URL:function(t){t.dataURL="",t.dataURLObtained=!1},SET_REMOTE_LAB_VERSION:function(t,e){t.remoteLabVersion=e},SET_DATA_RECORDER:function(t,e){t.isDataRecorderOn=e},SET_DISABLE_TOOLTIPS:function(t,e){t.disableTooltips=e},SET_EXPIRY_TIME:function(t,e){t.expiryTime=e},SET_CAMERA:function(t,e){t.camera=e}},actions:{setConnectionDroppedAt:function(t,e){t.commit("SET_CONNECTION_DROPPED_AT",e)},setConnectionIsDropped:function(t,e){t.commit("SET_CONNECTION_IS_DROPPED",e)},setLastVideoCheck:function(t,e){t.commit("SET_LAST_VIDEO_CHECK",e)},setLastVideoWrite:function(t,e){t.commit("SET_LAST_VIDEO_WRITE",e)},deleteStreams:function(t){t.commit("DELETE_STREAMS")},setStreams:function(t,e){t.commit("SET_STREAMS",e)},setVideoURL:function(t,e){t.commit("SET_VIDEO_URL",e)},deleteVideoURL:function(t){t.commit("DELETE_VIDEO_URL")},setDataURL:function(t,e){t.commit("SET_DATA_URL",e)},deleteDataURL:function(t){t.commit("DELETE_DATA_URL")},setRemoteLabVersion:function(t,e){t.commit("SET_REMOTE_LAB_VERSION",e)},setDataRecorder:function(t,e){t.commit("SET_DATA_RECORDER",e)},setDisableTooltips:function(t,e){t.commit("SET_DISABLE_TOOLTIPS",e)},setExpiryTime:function(t,e){t.commit("SET_EXPIRY_TIME",e)},setCamera:function(t,e){t.commit("SET_CAMERA",e)}},getters:{getStreamsObtained:function(t){return t.streamsObtained},getStreams:function(t){return t.streams},getStream:function(t){return function(e){if(null!=t.streams){if(!t.streamsObtained)return{};var a=t.streams.filter((function(t){return t.for==e}));return a.length<1?{}:a[0]}return{}}},getVideoURL:function(t){return t.videoURL},getVideoURLObtained:function(t){return t.videoURLObtained},getDataURL:function(t){return t.dataURL},getDataURLObtained:function(t){return t.dataURLObtained},getRemoteLabVersion:function(t){return t.remoteLabVersion},getIsDataRecorderOn:function(t){return t.isDataRecorderOn},getDisableTooltips:function(t){return t.disableTooltips},getExpiryTime:function(t){return t.expiryTime},getConnectionDroppedAt:function(t){return t.connectionDroppedAt},getConnectionIsDropped:function(t){return t.connectionIsDropped},getLastVideoCheck:function(t){return t.lastVideoCheck},getLastVideoWrite:function(t){return t.lastVideoWrite},getCamera:function(t){return t.camera}}}),qt=Ht,Qt=(a("ab8b"),a("5f5b")),te=(a("54ba"),a("2dd8"),new i["default"]);i["default"].config.productionTip=!1,i["default"].use(Qt["a"]),new i["default"]({store:qt,render:function(t){return t(Zt)}}).$mount("#app")},5700:function(t,e,a){"use strict";a("d1f7")},"5ca1":function(t,e,a){"use strict";a("23e7e")},6964:function(t,e,a){},7867:function(t,e,a){"use strict";a("7b41")},"7b41":function(t,e,a){},"85ec":function(t,e,a){},"86d3":function(t,e,a){"use strict";a("6964")},"8ef4":function(t,e,a){},9889:function(t,e,a){"use strict";a("0dd6")},"9f80":function(t,e,a){},b4f2:function(t,e,a){t.exports=a.p+"img/protractor.ea6a877b.png"},d1f7:function(t,e,a){},d479:function(t,e,a){"use strict";a("8ef4")}});
//# sourceMappingURL=app.996318e7.js.map