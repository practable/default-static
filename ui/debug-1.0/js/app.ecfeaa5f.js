(function(e){function t(t){for(var r,i,s=t[0],c=t[1],d=t[2],l=0,b=[];l<s.length;l++)i=s[l],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&b.push(a[i][0]),a[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);u&&u(t);while(b.length)b.shift()();return o.push.apply(o,d||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,s=1;s<n.length;s++){var c=n[s];0!==a[c]&&(r=!1)}r&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={app:0},o=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/ui/debug-1.0/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var d=0;d<s.length;d++)t(s[d]);var u=c;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"003f":function(e,t,n){},"470f":function(e,t,n){"use strict";n("fdbf")},"84e6":function(e,t,n){},b4f3:function(e,t,n){"use strict";n("84e6")},c0cb:function(e,t,n){"use strict";n("003f")},cd49:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"getStreamsObtained",(function(){return c})),n.d(r,"getStreams",(function(){return d})),n.d(r,"getStream",(function(){return u})),n.d(r,"getVideoURL",(function(){return l})),n.d(r,"getVideoURLObtained",(function(){return b})),n.d(r,"getDataURL",(function(){return f})),n.d(r,"getDataURLObtained",(function(){return m})),n.d(r,"getExpiryObtained",(function(){return p})),n.d(r,"getExpiry",(function(){return O}));var a={};n.r(a),n.d(a,"login",(function(){return h})),n.d(a,"clear",(function(){return j})),n.d(a,"deleteToken",(function(){return v})),n.d(a,"deleteBearer",(function(){return y}));var o={};n.r(o),n.d(o,"deleteStreams",(function(){return g})),n.d(o,"setStreams",(function(){return x})),n.d(o,"setVideoURL",(function(){return w})),n.d(o,"deleteVideoURL",(function(){return k})),n.d(o,"setDataURL",(function(){return S})),n.d(o,"deleteDataURL",(function(){return L})),n.d(o,"deleteExpiry",(function(){return U})),n.d(o,"setExpiry",(function(){return R}));n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("f2bf"),s=n("5502"),c=(n("4de4"),function(e){return e.streamsObtained}),d=function(e){return e.streams},u=function(e,t){return function(t){if(!e.streamsObtained)return{};var n=e.streams.filter((function(e){return e.for==t}));return n.length<1?{}:n[0]}},l=function(e){return e.videoURL},b=function(e){return e.videoURLObtained},f=function(e){return e.dataURL},m=function(e){return e.dataURLObtained},p=function(e){return e.expiryObtained},O=function(e){return e.expiry},h=function(e){var t=e.commit;t("login")},j=function(e){var t=e.commit;t("clear")},v=function(e){var t=e.commit;t("deleteToken")},y=function(e){var t=e.commit;t("deleteBearer")},g=function(e){e.streams={},e.streamsObtained=!1},x=function(e,t){e.streams=t,e.streamsObtained=!0},w=function(e,t){e.videoURL=t,e.videoURLObtained=!0},k=function(e,t){e.videoURL="",e.videoURLObtained=!1},S=function(e,t){e.dataURL=t,e.dataURLObtained=!0},L=function(e,t){e.dataURL="",e.dataURLObtained=!1},U=function(e){e.expiry=-1,e.expiryObtained=!1},R=function(e,t){e.expiry=t,e.expiryObtained=!0},Y={streams:[],streamsObtained:!1,videoURL:"",videoURLObtained:!1,dataURL:"",dataURLObtained:!1,expiry:-1,expiryObtained:!1},q=Object(s["b"])({state:Y,getters:r,actions:a,mutations:o,plugins:[Object(s["a"])()]}),T=q,E=Object(i["h"])("img",{width:"300",src:"https://assets.practable.io/images/common/practable-logo-3-1980x660.png"},null,-1),D={id:"nav"},M=Object(i["g"])("Connections"),P=Object(i["g"])(" | "),$=Object(i["g"])("About"),A=Object(i["h"])("p",{style:{"margin-bottom":"0.7cm"}},null,-1);function F(e,t,n,r,a,o){var s=Object(i["v"])("router-link"),c=Object(i["v"])("router-view");return Object(i["q"])(),Object(i["d"])(i["a"],null,[E,Object(i["h"])("div",D,[Object(i["h"])(s,{to:"/"},{default:Object(i["A"])((function(){return[M]})),_:1}),P,Object(i["h"])(s,{to:"/about"},{default:Object(i["A"])((function(){return[$]})),_:1})]),A,Object(i["h"])(c)],64)}var C={name:"App",components:{}};n("c0cb");C.render=F;var W=C,B=n("6c02"),K={class:"container-fluid align-center"},z=Object(i["h"])("h1",null,"About",-1),V=Object(i["h"])("p",null," This is a diagnostic interface to show developers what information the booking system has passed to their user interface. User interfaces typically require to connect to video and data streams, using authentication, with time limits and with different read/write scopes. If this page is working, but your user interface for same piece of hardware is not, then check again your implementation of the stream decoding, and (re)connection process, using this page as an example. Note that this interface implements both store and router to mimic a typical interface, placing the query params in the store upon loading, so that when using the router to navigate between pages, the streams information is not lost.",-1);function _(e,t){return Object(i["q"])(),Object(i["d"])("div",K,[z,V])}const I={};I.render=_;var H=I;function N(e,t){return Object(i["q"])(),Object(i["d"])("h1",null,"Oops, it looks like the page you're looking for doesn't exist.")}const G={};G.render=N;var J=G,Q={class:"row"},X={class:"col"},Z=Object(i["h"])("h1",null," Connection diagnostics ",-1),ee={class:"col"},te=Object(i["h"])("h1",null," Video ",-1),ne={class:"col"},re=Object(i["h"])("h1",null," Data ",-1);function ae(e,t,n,r,a,o){var s=Object(i["v"])("display-expiry"),c=Object(i["v"])("display-connections"),d=Object(i["v"])("display-video"),u=Object(i["v"])("display-data");return Object(i["q"])(),Object(i["d"])("div",Q,[Object(i["h"])("div",X,[Z,Object(i["h"])(s,{exp:e.exp},null,8,["exp"]),Object(i["h"])(c,{streams:e.decodedStreams},null,8,["streams"])]),Object(i["h"])("div",ee,[te,Object(i["h"])(d,{stream:e.videoStream},null,8,["stream"])]),Object(i["h"])("div",ne,[re,Object(i["h"])(u,{stream:e.dataStream},null,8,["stream"])])])}function oe(e,t,n,r,a,o){var s=Object(i["v"])("display-connection");return Object(i["q"])(!0),Object(i["d"])(i["a"],null,Object(i["u"])(e.streams,(function(e,t){return Object(i["q"])(),Object(i["d"])(s,{stream:e,key:e.for},null,8,["stream"])})),128)}function ie(e,t,n,r,a,o){return Object(i["q"])(),Object(i["d"])(i["a"],null,[Object(i["h"])("h3",null,Object(i["x"])(e.stream.for),1),Object(i["h"])("p",null,Object(i["x"])(e.stream.verb)+" to "+Object(i["x"])(e.stream.url),1),Object(i["h"])("p",null," Scopes: "+Object(i["x"])(e.stream.permission.scopes),1),Object(i["h"])("p",null," Token: "+Object(i["x"])(e.tokenSnippet),1)],64)}n("fb6a"),n("d3b7"),n("25f0");var se=n("1232"),ce=Object(i["i"])({name:"DisplayConnection",props:["stream"],computed:{decoded:function(){try{return JSON.stringify(Object(se["a"])(this.stream.token),void 0,2)}catch(e){return"could not decode token"}},tokenSnippet:function(){if(this.stream.hasOwnProperty("token")){var e=this.stream.token,t=e.substring(0,6),n=e.length.toString(),r=e.slice(e.length-6);return t+"..."+r+" ("+n+" chars)"}return"(none supplied)"}}});ce.render=ie;var de=ce,ue=Object(i["i"])({name:"DisplayConnections",props:["streams"],components:{"display-connection":de}});ue.render=oe;var le=ue,be={key:0},fe={key:1};function me(e,t,n,r,a,o){return Object(i["q"])(),Object(i["d"])(i["a"],null,[Object(i["g"])(" This session "+Object(i["x"])(e.finishWord)+" at "+Object(i["x"])(e.finishes)+" ",1),e.expired?Object(i["e"])("",!0):(Object(i["q"])(),Object(i["d"])("div",be,"which is in "+Object(i["x"])(e.timerCount)+" seconds",1)),e.expired?(Object(i["q"])(),Object(i["d"])("div",fe,"which was "+Object(i["x"])(e.ago)+" seconds ago",1)):Object(i["e"])("",!0)],64)}var pe=n("ad15"),Oe=n.n(pe),he=Object(i["i"])({name:"DisplayExpiry",props:["exp"],data:function(){return{timerCount:0}},computed:{finishes:function(){return Oe.a.unix(this.exp).format("h:mm A")},finishWord:function(){return this.expired?"finished":"finishes"},expired:function(){return this.timerCount<1},ago:function(){return-1*this.timerCount}},watch:{exp:function(e,t){this.timerCount=this.exp-Oe()().unix()},timerCount:{handler:function(e){var t=this;setTimeout((function(){t.timerCount--}),1e3)},immediate:!0}}});he.render=me;var je=he;function ve(e,t,n,r,a,o){var s=Object(i["v"])("data-element");return Object(i["q"])(),Object(i["d"])(i["a"],null,[e.urlOK?(Object(i["q"])(),Object(i["d"])(s,{key:0,url:e.url},null,8,["url"])):Object(i["e"])("",!0),Object(i["g"])(" "+Object(i["x"])(e.url),1)],64)}var ye={class:"col"},ge=Object(i["f"])('<div class="row"><h4> Read </h4></div><div class="row"><div id="data-box" class="textbox" contenteditable="true"></div></div><div class="row"><h4> Write </h4></div><div class="row"><div id="cmd-box" class="textbox" contenteditable="true"></div></div>',4),xe={class:"row"},we=Object(i["g"])(" Clear "),ke=Object(i["h"])("span",{class:"caret"},null,-1),Se=Object(i["g"])(" Send "),Le=Object(i["h"])("span",{class:"caret"},null,-1);function Ue(e,t,n,r,a,o){return Object(i["q"])(),Object(i["d"])("div",ye,[ge,Object(i["h"])("div",xe,[Object(i["h"])("button",{type:"button",onClick:t[1]||(t[1]=function(){return e.clear&&e.clear.apply(e,arguments)}),class:"btn btn-secondary",id:"cmd-btn"},[we,ke]),Object(i["h"])("button",{type:"button",onClick:t[2]||(t[2]=function(){return e.send&&e.send.apply(e,arguments)}),class:"btn btn-primary",id:"cmd-btn"},[Se,Le])])])}var Re=Object(i["i"])({name:"DataElement",props:["url"],data:function(){return{connection:null}},methods:{send:function(){var e=document.getElementById("cmd-box");e&&this.connection&&this.connection.send(e.innerHTML)},clear:function(){var e=document.getElementById("cmd-box");e&&(e.innerHTML="")}},mounted:function(){this.connection=new WebSocket(this.url),console.log("opening data socket"),this.connection.addEventListener("open",(function(e){console.log("data connection open")})),this.connection.addEventListener("message",(function(e){var t=document.getElementById("data-box");t&&(t.innerHTML=e.data)}))}});n("b4f3");Re.render=Ue;var Ye=Re,qe=n("bc3a"),Te=n.n(qe),Ee=Object(i["i"])({name:"DisplayData",components:{"data-element":Ye},props:["stream"],computed:{urlOK:function(){return this.$store.getters.getDataURLObtained},streamOK:function(){return this.stream},url:function(){return this.$store.getters.getDataURL}},watch:{streamOK:function(e,t){if(e){var n=this.stream.url,r=this.stream.token,a=this.$store;Te.a.post(n,{},{headers:{Authorization:r}}).then((function(e){a.commit("setDataURL",e.data.uri)})).catch((function(e){return console.log(e)}))}},urlOK:function(e,t){e&&console.log("get dataURL",this.urlOK,this.url)}}});Ee.render=ve;var De=Ee;function Me(e,t,n,r,a,o){var s=Object(i["v"])("video-element");return Object(i["q"])(),Object(i["d"])(i["a"],null,[Object(i["h"])("div",null,[e.urlOK?(Object(i["q"])(),Object(i["d"])(s,{key:0,url:e.url},null,8,["url"])):Object(i["e"])("",!0)]),Object(i["g"])(" "+Object(i["x"])(e.url),1)],64)}var Pe={id:"videoWrapper"};function $e(e,t,n,r,a,o){return Object(i["q"])(),Object(i["d"])("div",Pe)}var Ae=n("7a33"),Fe=n.n(Ae),Ce=Object(i["i"])({name:"VideoElement",props:["url"],mounted:function(){this.player=new Fe.a.VideoElement("#videoWrapper",this.url,{autoplay:!0,chunkSize:10485760})}});n("470f");Ce.render=$e;var We=Ce,Be=Object(i["i"])({name:"DisplayVideo",components:{"video-element":We},props:["stream"],computed:{urlOK:function(){return this.$store.getters.getVideoURLObtained},streamOK:function(){return this.stream},url:function(){return this.$store.getters.getVideoURL}},watch:{streamOK:function(e,t){if(e){var n=this.stream.url,r=this.stream.token,a=this.$store;Te.a.post(n,{},{headers:{Authorization:r}}).then((function(e){a.commit("setVideoURL",e.data.uri)})).catch((function(e){return console.log(e)}))}},urlOK:function(e,t){e&&console.log("get videoURL",this.urlOK,this.url)}}});Be.render=Me;var Ke=Be,ze=Object(i["i"])({name:"Activity",components:{"display-connections":le,"display-video":Ke,"display-data":De,"display-expiry":je},computed:{id:function(){return this.$route.params.id},decodedStreams:function(){return this.$store.getters.getStreams},streamsObtained:function(){return this.$store.getters.getStreamsObtained},videoStream:function(){return this.$store.getters.getStream("video")},dataStream:function(){return this.$store.getters.getStream("data")},exp:function(){return this.$store.getters.getExpiry},expObtained:function(){return this.$store.getters.getExpiryObtained}},mounted:function(){if(!this.streamsObtained){try{var e=JSON.parse(decodeURIComponent(String(this.$route.query.streams)));this.$store.commit("setStreams",e)}catch(n){console.log("error decoding streams",n),this.$store.commit("deleteStreams")}try{var t=this.$route.query.exp;this.$store.commit("setExpiry",t)}catch(n){console.log("error obtaining expiry",n),this.$store.commit("deleteExpiry")}}},watch:{$route:function(e,t){console.log("Activity:",e,t)}}});ze.render=ae;var Ve=ze,_e=[{path:"/",name:"Home",component:Ve},{path:"/about",name:"about",component:H},{path:"/:pathMatch(.*)*",name:"not-found",component:J}],Ie=Object(B["a"])({history:Object(B["b"])("/ui/debug-1.0/"),routes:_e}),He=Ie,Ne=n("2510"),Ge=(n("4989"),n("ab8b"),Object(i["c"])(W));Ge.use(T).use(He).use(Ne["a"]),Ge.mount("#app")},f099:function(e,t,n){var r={"./advancedFormat":"8f19","./advancedFormat.d":"23cb6","./advancedFormat.d.ts":"23cb6","./advancedFormat.js":"8f19","./arraySupport":"eea7","./arraySupport.d":"5157","./arraySupport.d.ts":"5157","./arraySupport.js":"eea7","./badMutable":"bff7","./badMutable.d":"f5cb","./badMutable.d.ts":"f5cb","./badMutable.js":"bff7","./buddhistEra":"dd46","./buddhistEra.d":"1517","./buddhistEra.d.ts":"1517","./buddhistEra.js":"dd46","./calendar":"1c1c","./calendar.d":"8f7b","./calendar.d.ts":"8f7b","./calendar.js":"1c1c","./customParseFormat":"f906","./customParseFormat.d":"ccd7","./customParseFormat.d.ts":"ccd7","./customParseFormat.js":"f906","./dayOfYear":"8d82","./dayOfYear.d":"80f4","./dayOfYear.d.ts":"80f4","./dayOfYear.js":"8d82","./devHelper":"85c1","./devHelper.d":"d82b","./devHelper.d.ts":"d82b","./devHelper.js":"85c1","./duration":"d772","./duration.d":"7ce6","./duration.d.ts":"7ce6","./duration.js":"d772","./isBetween":"e418","./isBetween.d":"444f","./isBetween.d.ts":"444f","./isBetween.js":"e418","./isLeapYear":"04ee","./isLeapYear.d":"8891","./isLeapYear.d.ts":"8891","./isLeapYear.js":"04ee","./isMoment":"4bde","./isMoment.d":"9f59","./isMoment.d.ts":"9f59","./isMoment.js":"4bde","./isSameOrAfter":"d758","./isSameOrAfter.d":"55ef","./isSameOrAfter.d.ts":"55ef","./isSameOrAfter.js":"d758","./isSameOrBefore":"b375","./isSameOrBefore.d":"bda5","./isSameOrBefore.d.ts":"bda5","./isSameOrBefore.js":"b375","./isToday":"83dc","./isToday.d":"44fa","./isToday.d.ts":"44fa","./isToday.js":"83dc","./isTomorrow":"de19","./isTomorrow.d":"c0e5","./isTomorrow.d.ts":"c0e5","./isTomorrow.js":"de19","./isYesterday":"c4a1","./isYesterday.d":"7270","./isYesterday.d.ts":"7270","./isYesterday.js":"c4a1","./isoWeek":"5e77","./isoWeek.d":"091b","./isoWeek.d.ts":"091b","./isoWeek.js":"5e77","./isoWeeksInYear":"5a5a","./isoWeeksInYear.d":"c5c2","./isoWeeksInYear.d.ts":"c5c2","./isoWeeksInYear.js":"5a5a","./localeData":"5e0f","./localeData.d":"f94f","./localeData.d.ts":"f94f","./localeData.js":"5e0f","./localizedFormat":"23ad","./localizedFormat.d":"5df3","./localizedFormat.d.ts":"5df3","./localizedFormat.js":"23ad","./minMax":"4650","./minMax.d":"5286","./minMax.d.ts":"5286","./minMax.js":"4650","./objectSupport":"0122","./objectSupport.d":"99d6","./objectSupport.d.ts":"99d6","./objectSupport.js":"0122","./pluralGetSet":"8bdc","./pluralGetSet.d":"a5bd","./pluralGetSet.d.ts":"a5bd","./pluralGetSet.js":"8bdc","./preParsePostFormat":"05bf","./preParsePostFormat.d":"843e","./preParsePostFormat.d.ts":"843e","./preParsePostFormat.js":"05bf","./quarterOfYear":"9b1f","./quarterOfYear.d":"d04b","./quarterOfYear.d.ts":"d04b","./quarterOfYear.js":"9b1f","./relativeTime":"4208","./relativeTime.d":"d000","./relativeTime.d.ts":"d000","./relativeTime.js":"4208","./timezone":"1953","./timezone.d":"6601","./timezone.d.ts":"6601","./timezone.js":"1953","./toArray":"d163","./toArray.d":"2fac","./toArray.d.ts":"2fac","./toArray.js":"d163","./toObject":"d186","./toObject.d":"ee32","./toObject.d.ts":"ee32","./toObject.js":"d186","./updateLocale":"b002","./updateLocale.d":"a9b7","./updateLocale.d.ts":"a9b7","./updateLocale.js":"b002","./utc":"0ecf","./utc.d":"cdb3","./utc.d.ts":"cdb3","./utc.js":"0ecf","./weekOfYear":"2a04","./weekOfYear.d":"88e7","./weekOfYear.d.ts":"88e7","./weekOfYear.js":"2a04","./weekYear":"1ac8","./weekYear.d":"8ab7","./weekYear.d.ts":"8ab7","./weekYear.js":"1ac8","./weekday":"7e21","./weekday.d":"7264","./weekday.d.ts":"7264","./weekday.js":"7e21"};function a(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id="f099"},fdbf:function(e,t,n){}});
//# sourceMappingURL=app.ecfeaa5f.js.map